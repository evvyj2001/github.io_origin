<!DOCTYPE html>
<html lang="ko">
    <head>
        <!--#include file="./_inc/_head.html"-->
    </head>

    <body>
        <div id="wrap" class="sub">
            <!--#include file="./_inc/_header.html"-->
            <div class="container">
                <p id="demo"></p>
                <button onclick="popOpen('popup_momentum');">모멘텀 버튼1</button>
                <button onclick="popOpen('popup_momentum2');">모멘텀 버튼2</button>
            </div>
            <!--#include file="./_inc/_footer.html"-->
        </div>
        <script>
            subPageFunction();

            const xhttp = new XMLHttpRequest();
            xhttp.onreadystatechange = function () {
                if (xhttp.readyState === 4 && xhttp.status === 200) {
                    jsonfunc(this.responseText); // this = xhttp
                    //		jsonfunc(xhttp.responseText); // 둘다 가능
                }
            };
            xhttp.open('GET', 'example.json', true); // 불러올 json파일
            xhttp.send();

            function jsonfunc(jsonText) {
                const json = JSON.parse(jsonText); // String -> json으로 변환

                // let txt = "";
                let popupContent = '';
                // 접근법 1
                // for (i = 0; i < json.length; i++) {
                //     for (key in json[i]) { // key값 가져오기
                //         txt += key + ":" + json[i][key];
                //     }
                //     txt += "<br>";
                // }

                // 접근법2
                for (let i = 0; i < json.length; i++) {
                    popupContent += `
                <div class="popup" id="popup_${json[i].id}">
                    <p class="popup-head">
                        ${json[i].id}
                        <a href="/${json[i].id}/" target="_blank" title="${json[i].id} 바로가기">
                            <i class="fa-solid fa-arrow-up-right-from-square"></i>
                        </a>
                    </p>
                    <div class="popup-body">
                        <p class="popup-tool-tit"><i class="fa-solid fa-gear"></i>관련 기술</p>
                        <ul class="popup-tool">
                            ${json[i].tool}
                        </ul>
                        <div class="cont">
                            <p class="txt">
                                ${json[i].description}
                            </p>
                            <ul class="list-dot">
                                ${json[i].list}
                            </ul>
                            <div class="img-wrap">
                                <img src="${json[i].img}" alt="">
                            </div>
                        </div>
                    </div>
                    <div class="btn-wrap">
                        <button class="btn bg-dark" onclick="popClose(event)">닫기</button>
                    </div>
                    <button class="popup-btn-close" title="닫기" onclick="popClose(event)"></button>
                </div>
                `;
                }
                document.getElementById('demo').innerHTML = popupContent;
            }
        </script>
    </body>
</html>
